jQuery(function(t){if(void 0===interpresent_ajax.cart)return!1;let e=function(){t(".promotion--cart").length>0&&t(".promotion--cart").toggleClass("disabled")};window.cart={couponClick:function(){t(".coupon__button").click(function(a){a.preventDefault(),$this=t(this);var n=$this.siblings("input[name=coupon_code]").val();if(n&&""!==n){var o={action:"apply_coupon_ajax",coupon_val:n};return t.ajax({url:interpresent_ajax.url,data:o,type:"POST",beforeSend:function(){e()},complete:function(){e()},success:function(e){if(e){var a=e.fragments;a&&(jQuery.each(a,function(t,e){jQuery(t).replaceWith(e)}),window.countProduct(".my-basket__item",0),window.cart.qtyChange(),window.cart.removeItem(),window.cart.couponClick(),window.cart.couponRemove(),t("body").trigger("update_total_price"))}},error:function(t){console.log(t)}}),!1}return console.log("Пустое значение"),!1})},couponRemove:function(){t(".woocommerce-remove-coupon").click(function(a){a.preventDefault(),$this=t(this);var n=$this.data("coupon");if(n){var o={action:"apply_coupon_ajax",coupon_val:n};return t.ajax({url:interpresent_ajax.url,data:o,type:"POST",beforeSend:function(){e()},complete:function(){e()},success:function(e){if(e){var a=e.fragments;a&&(jQuery.each(a,function(t,e){jQuery(t).replaceWith(e)}),window.countProduct(".my-basket__item",0),window.cart.qtyChange(),window.cart.removeItem(),window.cart.couponClick(),window.cart.couponRemove(),t("body").trigger("update_total_price"))}},error:function(t){console.log(t)}}),!1}return console.log("Пустое значение"),!1})},qtyChange:function(){var a;t(".my-basket__form .qty").on("change",function(){$this=t(this);var n=$this.val(),o={action:"update_total_price",quantity:parseFloat(n),hash:$this.attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1")};return a&&clearTimeout(a),a=setTimeout(function(){!function(a){console.log("ajax request"),t.ajax({url:interpresent_ajax.url,data:a,type:"POST",beforeSend:function(){e()},complete:function(){e()},success:function(e){if(e){var a=e.fragments;a&&(jQuery.each(a,function(t,e){jQuery(t).replaceWith(e)}),window.countProduct(".my-basket__item",0),window.cart.qtyChange(),window.cart.removeItem(),window.cart.couponClick(),window.cart.couponRemove(),t("body").trigger("update_total_price"))}},error:function(t){console.log(t)}})}(o)},500),!1})},removeItem:function(){t(".my-basket__delete").click(function(a){a.preventDefault(),$this=t(this);var n=$this.data("product_id"),o={action:"update_total_price",quantity:0,hash:$this.parent().parent("tr").find(".qty").attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1")};return t.ajax({url:interpresent_ajax.url,data:o,type:"POST",beforeSend:function(){e()},complete:function(){e()},success:function(e){if(e){var a=e.fragments;a&&(jQuery.each(a,function(t,e){jQuery(t).replaceWith(e)}),window.countProduct(".my-basket__item",0),window.cart.qtyChange(),window.cart.removeItem(),window.cart.couponClick(),window.cart.couponRemove(),t("body").trigger("update_total_price"),t(".card__button").each(function(){t(this).parent().hasClass("active")&&t(this).data("product_id")==n&&(t(this).text("В корзину"),t(this).parent().removeClass("active"))}))}},error:function(t){console.log(t)}}),!1})},addToCart:function(){t(".add_to_cart_button").click(function(e){if(t(this).hasClass("ajax_add_to_cart")){e.preventDefault();var a=t(this),n=a.siblings().find("input[name=quantity]").val()||1,o={action:"woocommerce_ajax_add_to_cart",product_id:a.data("product_id"),product_sku:"",quantity:n};return t(document.body).trigger("adding_to_cart",[a,o]),t.ajax({type:"POST",url:interpresent_ajax.url,data:o,beforeSend:function(t){a.removeClass("added").addClass("loading")},complete:function(t){a.addClass("added").removeClass("loading")},success:function(e){e.error&&e.product_url?window.location=e.product_url:(a.text("В корзине"),a.parent(".card__right").addClass("active"),t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,a]))}}),!1}})}},window.cart.addToCart(),t(".card__button--product").click(function(e){e.preventDefault();var a,n,o,r=t(this),c=!1;if(r.hasClass("card__button--simple")?(a=r.parent().siblings(".count-product").find("input[name=quantity]").val()||1,n=r.val(),o=0,c=!0):r.hasClass("card__button--variable")&&(a=r.parent().parent().parent().siblings(".count-product").find("input[name=quantity]").val()||1,n=r.siblings("input[name=product_id]").val(),(o=r.siblings("input[name=variation_id]").val())>0&&(c=!0)),c){var i={action:"woocommerce_ajax_add_to_cart",product_id:n,variation_id:o,product_sku:"",quantity:a};t(document.body).trigger("adding_to_cart",[r,i]),t.ajax({type:"POST",url:interpresent_ajax.url,data:i,beforeSend:function(t){r.toggleClass("active")},complete:function(t){r.toggleClass("active")},success:function(e){e.error&&e.product_url?window.location=e.product_url:t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,r])}})}return!1})});